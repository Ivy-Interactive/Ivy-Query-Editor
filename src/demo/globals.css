/* Import Ivy Design System tokens */
@import 'ivy-design-system/css/ivy-web';

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }

  /* Override background to use pure white from semantic colors */
  :root {
    --color-shadcn-background: var(--color-semantic-surface-primary);
  }
}

@layer components {
  /* CodeMirror Editor Styles */
  .cm-editor-container .cm-editor {
    @apply bg-transparent h-full;
  }

  .cm-editor-container .cm-editor.cm-focused {
    @apply outline-none;
  }

  .cm-editor-container .cm-content {
    @apply px-4 py-[14px] font-mono text-xs cursor-text;
    min-height: auto;
  }

  .cm-editor-container .cm-line {
    @apply leading-relaxed;
  }

  .cm-editor-container .cm-placeholder {
    @apply italic;
    color: var(--color-semantic-text-muted);
    opacity: 0.6;
  }

  .cm-editor-container .cm-cursor {
    @apply border-l-2 border-primary;
  }

  .cm-editor-container .cm-selectionBackground {
    background-color: var(--color-shadcn-primary);
    opacity: 0.2;
  }

  .cm-editor-container .cm-gutters {
    @apply border-r border-border;
    background-color: var(--color-shadcn-muted);
    opacity: 0.3;
  }

  .cm-editor-container .cm-lineNumbers {
    @apply text-muted-foreground text-xs;
  }

  .cm-editor-container .cm-activeLine {
    background-color: var(--color-shadcn-muted);
    opacity: 0.5;
  }

  .cm-editor-container .cm-matchingBracket {
    @apply font-bold;
    background-color: var(--color-shadcn-primary);
    opacity: 0.3;
  }

  /* Syntax highlighting */
  .cm-editor-container .cm-query-field {
    @apply text-blue-600 dark:text-blue-400 font-semibold;
  }

  .cm-editor-container .cm-query-string {
    @apply text-green-600 dark:text-green-400;
  }

  .cm-editor-container .cm-query-number {
    @apply text-purple-600 dark:text-purple-400;
  }

  .cm-editor-container .cm-query-boolean {
    @apply text-red-600 dark:text-red-400;
  }

  .cm-editor-container .cm-query-keyword {
    @apply text-pink-600 dark:text-pink-400 font-semibold;
  }

  .cm-editor-container .cm-query-operator {
    @apply text-cyan-600 dark:text-cyan-400;
  }

  .cm-editor-container .cm-query-bracket {
    @apply text-slate-600 dark:text-slate-400 font-bold;
  }

  /* Error styling */
  .cm-editor-container .cm-query-error {
    @apply underline decoration-destructive decoration-wavy underline-offset-4;
  }

  .cm-editor-container .cm-lintRange-error {
    background-color: var(--color-shadcn-destructive);
    opacity: 0.1;
  }

  /* Tooltips */
  .cm-editor-container .cm-tooltip {
    @apply rounded-md border bg-popover text-popover-foreground shadow-md px-3 py-1.5 text-sm;
  }

  .cm-editor-container .cm-tooltip-lint {
    @apply max-w-xs;
  }

  /* Autocomplete */
  .cm-editor-container .cm-tooltip-autocomplete {
    @apply rounded-lg border bg-popover shadow-lg;
  }

  .cm-editor-container .cm-tooltip-autocomplete ul {
    @apply m-0 p-1;
  }

  .cm-editor-container .cm-tooltip-autocomplete ul li {
    @apply rounded px-2 py-1 text-sm;
  }

  .cm-editor-container .cm-tooltip-autocomplete ul li[aria-selected="true"] {
    @apply bg-accent text-accent-foreground;
  }

  /* AI Glowing Border Animation */
  @keyframes ai-glow {
    0%, 100% {
      box-shadow: 0 0 8px rgba(139, 92, 246, 0.6),
                  0 0 16px rgba(139, 92, 246, 0.4),
                  0 0 24px rgba(139, 92, 246, 0.2);
    }
    33% {
      box-shadow: 0 0 8px rgba(236, 72, 153, 0.6),
                  0 0 16px rgba(236, 72, 153, 0.4),
                  0 0 24px rgba(236, 72, 153, 0.2);
    }
    66% {
      box-shadow: 0 0 8px rgba(59, 130, 246, 0.6),
                  0 0 16px rgba(59, 130, 246, 0.4),
                  0 0 24px rgba(59, 130, 246, 0.2);
    }
  }

  @keyframes ai-border-rotate {
    0% {
      background-position: 0% 50%;
    }
    100% {
      background-position: 200% 50%;
    }
  }

  .ai-animated-border {
    position: relative;
    background: linear-gradient(
      90deg,
      rgba(139, 92, 246, 0.7) 0%,
      rgba(236, 72, 153, 0.7) 20%,
      rgba(59, 130, 246, 0.7) 40%,
      rgba(139, 92, 246, 0.7) 60%,
      rgba(236, 72, 153, 0.7) 80%,
      rgba(139, 92, 246, 0.7) 100%
    );
    background-size: 200% 100%;
    animation: ai-border-rotate 5s linear infinite, ai-glow 6s ease-in-out infinite;
    padding: 2px;
    border-radius: 0.375rem;
  }

  .ai-animated-border-inner {
    background: hsl(var(--background));
    border-radius: 0.25rem;
  }

  /* AI Toggle Glow Animation */
  @keyframes toggle-glow {
    0%, 100% {
      box-shadow: 0 0 4px rgba(139, 92, 246, 0.4),
                  0 0 8px rgba(139, 92, 246, 0.2);
    }
    50% {
      box-shadow: 0 0 8px rgba(139, 92, 246, 0.6),
                  0 0 12px rgba(139, 92, 246, 0.3);
    }
  }

  .ai-toggle-glow {
    animation: toggle-glow 2s ease-in-out infinite;
  }
}
